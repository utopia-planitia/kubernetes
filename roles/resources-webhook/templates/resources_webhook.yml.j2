apiVersion: v1
kind: Pod
metadata:
  name: resources-webhook
  namespace: kube-system
spec:
  hostNetwork: true
  containers:
    - name: default-resources-webhook
      image: "pandorasnox/kubernetes-default-container-resources:1.3.0"
      command:
        - "/kubernetes-default-container-resources"
      args:
        - "-addr='{{ resources_webhook_addr }}'"
        - "-sslCert='{{ resources_webhook_cert_dir }}/server.pem'"
        - "-sslKey='{{ resources_webhook_cert_dir }}/server-key.pem'"
      env:
        - name: CONFIG_HASH
          value: {{ resources_webhook_config_hash }}
  volumes:
    - name: config
      hostPath:
        path: /etc/kubernetes
    - name: logs
      hostPath:
        path: /var/log/kubernetes
